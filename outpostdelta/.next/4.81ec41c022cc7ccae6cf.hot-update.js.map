{"version":3,"file":"4.81ec41c022cc7ccae6cf.hot-update.js","sources":["webpack:///components/projects/1CCompany/RussianGamingGraph.js","webpack:///./node_modules/react-redux/es/connect/connect.js","webpack:///./node_modules/react-redux/es/index.js"],"sourcesContent":["/* eslint-disable */\n/* to do lint this file */\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport * as d3 from 'd3';\n\nconst data = '/static/northern.csv';\n\nexport default class RussianGamingGraph extends Component {\n  constructor(props, context) {\n    super(props, context);\n    this.props = props;\n\n    this.visualize = this.visualize.bind(this);\n    console.log('HousingGraph constructor this.props: ', this.props);\n  }\n\n  componentWillMount() {}\n\n  componentDidMount() {\n    console.log('HousingGraph componentDidMount');\n    this.visualize();\n  }\n\n  componentDidUpdate() {\n    console.log('HousingGraph componentDidUpdate');\n  }\n\n  visualize() {\n    console.log('drawActivity');\n\n    const tooltip = d3\n      .select('body')\n      .append('div')\n      .attr('id', 'tooltip')\n      .style('width', '150px')\n      .style('height', '40px')\n      .style('position', 'absolute')\n      .style('z-index', '10')\n      .style('visibility', 'hidden')\n      .style('padding', '10px')\n      .style('background-color', 'white')\n      .style('opacity', '0.9');\n\n    const tooltipG = tooltip.append('svg').append('g');\n\n    tooltipG\n      .append('text')\n      .attr('x', 0)\n      .attr('y', 20)\n      .attr('class', 'tooltipFirstText')\n      .text('a simple tooltip');\n\n    tooltipG\n      .append('text')\n      .attr('x', 0)\n      .attr('y', 40)\n      .style('fill', '#999')\n      .attr('class', 'tooltipSecondText')\n      .style('font-size', '12px')\n      .text('a simple tooltip 2');\n    /*\n    tooltipG\n      .append('rect')\n      .attr('width', 100)\n      .attr('height', 5)\n      .attr('y', 60)\n      .attr('class', 'tooltipBar')\n      .style('fill', 'red');\n      */\n\n    const width = window.innerWidth;\n    const height = window.innerHeight;\n    const viewport = d3\n      .select('#viewport')\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height)\n      .style('margin', '0 auto');\n\n    const svg = viewport;\n\n    d3\n      .select('svg')\n      .selectAll('.node')\n      .remove();\n\n    const format = d3.format(',d');\n\n    const color = d3.scaleOrdinal(d3.schemeCategory20c);\n\n    const pack = d3\n      .pack()\n      .size([width, width])\n      .padding(1.5);\n\n    d3.csv(\n      data,\n      d => {\n        d.value = +d.value;\n        if (d.value) return d;\n      },\n      (error, classes) => {\n        if (error) throw error;\n        const buildings = [\n          { title: 'Карты', total: 86, count: '3,925' },\n          { title: 'РостовНаДону', total: 128, count: '7,735' },\n          { title: 'Новосибирск ТЦ', total: 9, count: '834' },\n\n          { title: 'Цифровой склад 1С-Онлайн', total: 142, count: '9,234' },\n          { title: 'Выездная Торговля', total: 16, count: '1,016' },\n          { title: 'Якутск Орджоникидзе', total: 107, count: '5,331' }\n        ];\n        let count = 0;\n        let root = d3\n          .hierarchy({ children: classes })\n          .sum(d => {\n            return d.value;\n          })\n          .each(d => {\n            if ((id = d.data.id)) {\n              var id,\n                i = id.lastIndexOf('.');\n              d.id = id;\n              d.package = id.slice(0, i);\n              d.class = id.slice(i + 1);\n              d.title = buildings[count].title;\n              d.count = buildings[count].count;\n              d.total = buildings[count].total;\n              count++;\n            }\n          });\n\n        console.log('RussianGamingGraph root', root);\n\n        let node = svg\n          .selectAll('.node')\n          .data(pack(root).leaves())\n          .enter()\n          .append('g')\n          .attr('class', 'node')\n          .attr('transform', function(d) {\n            return 'translate(' + d.x + ',' + d.y + ')';\n          });\n\n        const aqua = 'rgba(51, 197, 197, 0.20)';\n\n        let getColor = i => {\n          if (i < 5) return aqua;\n          else return aqua;\n        };\n\n        const updateTooltip = (title, subTitle) => {\n          const titleLen = title.length;\n          const subTitleLen = subTitle.length;\n          const useLen = titleLen > subTitleLen ? titleLen : subTitleLen;\n\n          tooltip\n            .style('top', event.pageY - 10 + 'px')\n            .style('left', event.pageX + 10 + 'px')\n            .style('width', useLen * 6 + 'px');\n          //tooltip.text(title);\n          d3\n            .select('#tooltip')\n            .select('.tooltipFirstText')\n            .text(title);\n          d3\n            .select('#tooltip')\n            .select('.tooltipSecondText')\n            .text(subTitle);\n          /*\n          d3\n            .select('#tooltip')\n            .select('.tooltipBar')\n            .attr('width', title.length * 10 + 'px')\n            .style('fill', 'blue')\n            .transition()\n            .duration(1000)\n            .ease(d3.easeLinear)\n            .style('fill', 'red')\n            .transition()\n            .duration(1000)\n            .ease(d3.easeLinear)\n            .style('fill', 'blue')\n            .on('start', function repeat() {\n              d3\n                .active(this)\n                .style('fill', 'red')\n                .transition()\n                .style('fill', 'green')\n                .transition()\n                .style('fill', 'blue')\n                .transition()\n                .on('start', repeat);\n            });\n            */\n          return tooltip;\n        };\n\n        node\n          .append('rect')\n          .attr('id', function(d) {\n            return d.id;\n          })\n          .attr('width', function(d) {\n            return d.r;\n          })\n          .attr('height', function(d) {\n            return d.r;\n          })\n          .style('fill', function(d, i) {\n            return getColor(i);\n          })\n          .style('cursor', 'pointer')\n          .on('mouseover', function() {\n            return tooltip.style('visibility', 'visible');\n          })\n          .on('mousemove', function(d) {\n            const subTitle = `${d.total} Shops which sold ${d.count} Items`;\n            const title = d.title;\n            return updateTooltip(title, subTitle);\n          })\n          .on('mouseout', function() {\n            return tooltip.style('visibility', 'hidden');\n          })\n          .on('click', function(d) {\n            console.log(d);\n          });\n\n        node\n          .append('clipPath')\n          .attr('id', function(d) {\n            return 'clip-' + d.id;\n          })\n          .append('use')\n          .attr('xlink:href', function(d) {\n            return '#' + d.id;\n          });\n\n        /*\n  \t  node.append(\"text\")\n  \t      .attr(\"clip-path\", function(d) { return \"url(#clip-\" + d.id + \")\"; })\n  \t      .attr(\"text-anchor\", \"middle\")\n  \t    .selectAll(\"tspan\")\n  \t    .data(function(d) { return d.class.split(/(?=[A-Z][^A-Z])/g); })\n  \t    .enter().append(\"tspan\")\n  \t      .attr(\"x\", 0)\n  \t      .attr(\"y\", function(d, i, nodes) { return 13 + (i - nodes.length / 2 - 0.5) * 10; })\n  \t      .text(function(d) { return d; });\n\n\n  \t  node.append(\"title\")\n  \t      .text(function(d) { return d.id + \"\\n\" + format(d.value); });\n  \t         */\n      }\n    );\n  }\n\n  render() {\n    return <div id=\"viewport\" />;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// components/projects/1CCompany/RussianGamingGraph.js","var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nimport connectAdvanced from '../components/connectAdvanced';\nimport shallowEqual from '../utils/shallowEqual';\nimport defaultMapDispatchToPropsFactories from './mapDispatchToProps';\nimport defaultMapStateToPropsFactories from './mapStateToProps';\nimport defaultMergePropsFactories from './mergeProps';\nimport defaultSelectorFactory from './selectorFactory';\n\n/*\n  connect is a facade over connectAdvanced. It turns its args into a compatible\n  selectorFactory, which has the signature:\n\n    (dispatch, options) => (nextState, nextOwnProps) => nextFinalProps\n  \n  connect passes its args to connectAdvanced as options, which will in turn pass them to\n  selectorFactory each time a Connect component instance is instantiated or hot reloaded.\n\n  selectorFactory returns a final props selector from its mapStateToProps,\n  mapStateToPropsFactories, mapDispatchToProps, mapDispatchToPropsFactories, mergeProps,\n  mergePropsFactories, and pure args.\n\n  The resulting final props selector is called by the Connect component instance whenever\n  it receives new props or store state.\n */\n\nfunction match(arg, factories, name) {\n  for (var i = factories.length - 1; i >= 0; i--) {\n    var result = factories[i](arg);\n    if (result) return result;\n  }\n\n  return function (dispatch, options) {\n    throw new Error('Invalid value of type ' + typeof arg + ' for ' + name + ' argument when connecting component ' + options.wrappedComponentName + '.');\n  };\n}\n\nfunction strictEqual(a, b) {\n  return a === b;\n}\n\n// createConnect with default args builds the 'official' connect behavior. Calling it with\n// different options opens up some testing and extensibility scenarios\nexport function createConnect() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$connectHOC = _ref.connectHOC,\n      connectHOC = _ref$connectHOC === undefined ? connectAdvanced : _ref$connectHOC,\n      _ref$mapStateToPropsF = _ref.mapStateToPropsFactories,\n      mapStateToPropsFactories = _ref$mapStateToPropsF === undefined ? defaultMapStateToPropsFactories : _ref$mapStateToPropsF,\n      _ref$mapDispatchToPro = _ref.mapDispatchToPropsFactories,\n      mapDispatchToPropsFactories = _ref$mapDispatchToPro === undefined ? defaultMapDispatchToPropsFactories : _ref$mapDispatchToPro,\n      _ref$mergePropsFactor = _ref.mergePropsFactories,\n      mergePropsFactories = _ref$mergePropsFactor === undefined ? defaultMergePropsFactories : _ref$mergePropsFactor,\n      _ref$selectorFactory = _ref.selectorFactory,\n      selectorFactory = _ref$selectorFactory === undefined ? defaultSelectorFactory : _ref$selectorFactory;\n\n  return function connect(mapStateToProps, mapDispatchToProps, mergeProps) {\n    var _ref2 = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {},\n        _ref2$pure = _ref2.pure,\n        pure = _ref2$pure === undefined ? true : _ref2$pure,\n        _ref2$areStatesEqual = _ref2.areStatesEqual,\n        areStatesEqual = _ref2$areStatesEqual === undefined ? strictEqual : _ref2$areStatesEqual,\n        _ref2$areOwnPropsEqua = _ref2.areOwnPropsEqual,\n        areOwnPropsEqual = _ref2$areOwnPropsEqua === undefined ? shallowEqual : _ref2$areOwnPropsEqua,\n        _ref2$areStatePropsEq = _ref2.areStatePropsEqual,\n        areStatePropsEqual = _ref2$areStatePropsEq === undefined ? shallowEqual : _ref2$areStatePropsEq,\n        _ref2$areMergedPropsE = _ref2.areMergedPropsEqual,\n        areMergedPropsEqual = _ref2$areMergedPropsE === undefined ? shallowEqual : _ref2$areMergedPropsE,\n        extraOptions = _objectWithoutProperties(_ref2, ['pure', 'areStatesEqual', 'areOwnPropsEqual', 'areStatePropsEqual', 'areMergedPropsEqual']);\n\n    var initMapStateToProps = match(mapStateToProps, mapStateToPropsFactories, 'mapStateToProps');\n    var initMapDispatchToProps = match(mapDispatchToProps, mapDispatchToPropsFactories, 'mapDispatchToProps');\n    var initMergeProps = match(mergeProps, mergePropsFactories, 'mergeProps');\n\n    return connectHOC(selectorFactory, _extends({\n      // used in error messages\n      methodName: 'connect',\n\n      // used to compute Connect's displayName from the wrapped component's displayName.\n      getDisplayName: function getDisplayName(name) {\n        return 'Connect(' + name + ')';\n      },\n\n      // if mapStateToProps is falsy, the Connect component doesn't subscribe to store state changes\n      shouldHandleStateChanges: Boolean(mapStateToProps),\n\n      // passed through to selectorFactory\n      initMapStateToProps: initMapStateToProps,\n      initMapDispatchToProps: initMapDispatchToProps,\n      initMergeProps: initMergeProps,\n      pure: pure,\n      areStatesEqual: areStatesEqual,\n      areOwnPropsEqual: areOwnPropsEqual,\n      areStatePropsEqual: areStatePropsEqual,\n      areMergedPropsEqual: areMergedPropsEqual\n\n    }, extraOptions));\n  };\n}\n\nexport default createConnect();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-redux/es/connect/connect.js\n// module id = ./node_modules/react-redux/es/connect/connect.js\n// module chunks = 4","import Provider, { createProvider } from './components/Provider';\nimport connectAdvanced from './components/connectAdvanced';\nimport connect from './connect/connect';\n\nexport { Provider, createProvider, connectAdvanced, connect };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/react-redux/es/index.js\n// module id = ./node_modules/react-redux/es/index.js\n// module chunks = 4"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAAA;AAEA;AACA;AAEA;AAEA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAEA;AACA;AALA;AAMA;AACA;;;AACA;;;AAEA;AACA;AACA;AACA;;;AAEA;AACA;AACA;;;AAEA;AACA;AAEA;AAaA;AAEA;AAOA;AAQA;;;;;;;;;;AAUA;AACA;AACA;AAOA;AAEA;AAKA;AAEA;AAEA;AAKA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAEA;AACA;AAEA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAOA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAIA;AAIA;AAIA;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AAGA;AACA;AAGA;AACA;AAEA;;;;;;;;;;;;;AAeA;AAEA;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;AA5PA;AACA;AADA;;;;;;;;;;;;AAFA;AAEA;;;;;;;;;;;;;ACVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACtGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;;A","sourceRoot":""}